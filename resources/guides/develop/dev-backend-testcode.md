# 백엔드 테스트 코드 작성 가이드

## 목적
테스트코드표준의 공통전략과 테스트유형 전략을 준용하여, 서비스 소스 코드에 대한 단위 테스트 코드를 작성하고 모든 테스트가 성공할 때까지 수행한다.

## 입력 (이전 단계 산출물)

| 산출물 | 파일 경로 | 활용 방법 |
|--------|----------|----------|
| API 설계서 | `docs/design/api/{service-name}-api.yaml` | 테스트 대상 API |
| 클래스 설계서 | `docs/design/class/{service-name}.puml` | 테스트 대상 클래스 |
| 백엔드 소스코드 | `(런타임 결정)` | 테스트 작성 대상 |

## 출력 (이 단계 산출물)

| 산출물 | 파일 경로 |
|--------|----------|
| 단위 테스트 코드 | `backend/{service-name}/src/test/` |
| 테스트 결과 | `develop/test/{service-name}-{테스트유형}-{테스트대상}.md` |

## 방법론

### 테스트원칙
- '테스트코드표준'의 '공통전략'과 '{테스트유형} 전략' 준용
- 네이밍룰은 '테스트코드표준'에 정의된 패키지, 클래스, 메소드, 테스트 데이터 네이밍룰을 준용
- '개발주석표준'에 맞게 주석 작성
- 테스트 코드 개발 툴은 'Mockito'를 사용

### 작성순서

**준비:**
- {서비스} 코드 분석 및 이해
- {테스트유형} 테스트 코드 작성 계획 수립

**실행:**
- 테스트 코드 작성
  - 서브에이젼트를 사용하여 동시 작성
  - E2E테스트는 {테스트대상}이 지정되지 않으면 주요 사용자 시나리오별로 테스트 코드를 작성
  - 테스트 설정 Manifest(src/test/resources/application*.yml)의 각 항목의 값은 하드코딩하지 않고 환경변수 처리
- 테스트 수행 및 오류 해결
  - 각 서비스별로 서브에이젼트를 사용하여 동시 수행
  - 백킹서비스는 {서비스}의 설정 파일(application.yml)과 서비스 실행 프로파일을 읽어 작성
  - 테스트 실패 시 오류 해결하고 모두 성공할 때까지 계속 수행
- 설정 Manifest(src/main/resources/application*.yml) 변경
  - 테스트 결과를 이용하여 Manifest를 검토하여 필요 시 수정
  - 각 항목의 값은 하드코딩하지 않고 환경변수 처리
- 테스트 결과: test-backend-{서비스}-{테스트유형}.md

**검토:**
- 개발원칙 준수 검토
- 스쿼드 팀원 리뷰: 누락 및 개선 사항 검토
- 수정 사항 선택 및 반영

## 출력 형식

- 테스트 코드: `{서비스}/src/test` 하위에 테스트 코드 작성
- 테스트 결과: `develop/test/{서비스}-{테스트유형}-{테스트대상}.md`

## 품질 기준

- [ ] 모든 API에 단위 테스트 작성
- [ ] 테스트 없는 코드 제출 금지
- [ ] 테스트 설정 Manifest의 각 항목 값은 환경변수 처리
- [ ] 테스트 실패 시 오류 해결 후 재수행하여 모두 성공

## 주의사항

- 테스트코드표준의 공통전략과 테스트유형 전략을 반드시 준용
- 네이밍룰은 테스트코드표준에 정의된 패키지, 클래스, 메소드, 테스트 데이터 네이밍룰을 준용
- 개발주석표준에 맞게 주석 작성
- 테스트 코드 개발 툴은 Mockito를 사용
