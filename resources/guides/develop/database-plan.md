# 데이터베이스 설치 계획서 가이드

## 목적
물리아키텍처와 데이터설계서를 기반으로 각 서비스별 데이터베이스 설치 계획서와 캐시 설치 계획서를 작성한다. Kubernetes 환경에서 helm chart를 이용한 설치 계획을 병렬로 수행한다.

## 입력 (이전 단계 산출물)

| 산출물 | 파일 경로 | 활용 방법 |
|--------|----------|----------|
| 데이터 설계서 | `docs/design/database/{service-name}.md` | 스키마 기준 |
| 클래스 설계서 | `docs/design/class/{service-name}.puml` | Entity 매핑 |
| 물리 아키텍처 | `docs/design/physical/` (존재 시) | DB 인프라 확인 |

## 출력 (이 단계 산출물)

| 산출물 | 파일 경로 |
|--------|----------|
| DB 설치 계획서 | `docs/develop/database/plan/db-plan-{service-name}-{설치대상환경}.md` |
| 캐시 설치 계획서 | `docs/develop/database/plan/cache-plan-{설치대상환경}.md` |

## 방법론

### 작성원칙
- 물리아키텍처가 있는 경우 아래 준용
  - '물리아키텍처 > 4.2.1 데이터베이스 아키텍처'과 일치해야 함
  - '물리아키텍처 > 5.1.1 서비스별 데이터베이스 매핑'의 서비스별 데이터베이스와 스키마와 일치해야 함
  - '물리아키텍처 > 4.2.2 캐시 아키텍처'과 일치해야 함
  - '물리아키텍처 > 5.1.2 캐시 전략'과 일치해야 함
  - 그 외 데이터베이스 설치에 필요한 항목은 '물리아키텍처'와 일치해야 함
- (중요) "백킹서비스설치방법"의 가이드를 반드시 준용하여 작성
- Kubernetes에 배포 시 아래 준수
  - "백킹서비스설치방법"을 참조하여 helm chart로 설치하는 계획서 작성
  - 기본 StorageClass를 찾아 기술
  - 데이터베이스 생성 및 권한 부여 계획서 작성하지 말것
  - 테이블 스키마 생성 계획서는 작성하지 말것
- 설치 대상 클라우드 플랫폼은 이미 로그인되어 있고 Kubernetes도 연결되어 있음

### 작성순서

**준비:**
- 물리아키텍처, 데이터설계서, 백킹서비스설치방법 분석 및 이해

**실행:**
- 병렬처리 가이드대로 병렬 수행
- 각 서비스별로 데이터베이스 설치 계획서와 캐시DB 설치 계획서 작성
- 데이터베이스는 서비스별로 분리 구성
- 캐시는 모든 서비스가 공유하도록 구성
- 결과:
  - `db-plan-{service-name}-{설치대상환경}.md`
  - `cache-plan-{설치대상환경}.md`

**검토:**
- 작성원칙 준수 검토
- 스쿼드 팀원 리뷰: 누락 및 개선 사항 검토
- 수정 사항 선택 및 반영

### 병렬처리 가이드
- **의존성 분석 선행**: 병렬 처리 전 반드시 의존성 파악
- **순차 처리 필요시**: 무리한 병렬화보다는 안전한 순차 처리
- **검증 단계 필수**: 병렬 처리 후 통합 검증

### 예제 참조
https://raw.githubusercontent.com/cna-bootcamp/clauding-guide/refs/heads/main/samples/sample-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%EC%84%A4%EC%B9%98%EA%B3%84%ED%9A%8D%EC%84%9C.md

## 출력 형식

- DB 설치 계획서: `develop/database/plan/db-plan-{service-name}-{설치대상환경}.md`
- 캐시 설치 계획서: `develop/database/plan/cache-plan-{설치대상환경}.md`
- `{service-name}`은 영어로 작성
- `{설치대상환경}`은 `dev` 또는 `prod`로 작성

## 품질 기준

- [ ] 환경변수 기반 설정 Manifest 작성
- [ ] 설계서에 없는 컬럼 미추가
- [ ] 민감 정보 하드코딩 금지
- [ ] 물리아키텍처와 일치 여부 검증 (물리아키텍처 존재 시)
- [ ] helm chart 기반 설치 계획 작성 (Kubernetes 배포 시)

## 주의사항

- "백킹서비스설치방법"의 가이드를 반드시 준용하여 작성
- Kubernetes 배포 시 helm chart로 설치하는 계획서 작성
- 데이터베이스 생성 및 권한 부여 계획서 작성하지 말것
- 테이블 스키마 생성 계획서는 작성하지 말것
- 데이터베이스는 서비스별로 분리 구성, 캐시는 모든 서비스가 공유하도록 구성
- 민감 정보 하드코딩 금지
